<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanguard Defense: Strategic Planning Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
            margin: 0;
            padding: 2rem 1rem;
            box-sizing: border-box;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .status-big {
            background: rgba(15, 23, 42, 0.8);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 1.5rem;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        .metric-large {
            font-size: 3rem;
            font-weight: 900;
            line-height: 1;
            margin-bottom: 0.5rem;
        }
        .metric-label {
            font-size: 0.9rem;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .runway-warning {
            color: #fbbf24;
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 1rem;
        }
        .runway-critical {
            color: #ef4444;
            animation: pulse 1.5s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .action-points {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #0f172a;
            padding: 1rem 2rem;
            border-radius: 1rem;
            font-size: 1.5rem;
            font-weight: 900;
            display: inline-block;
            margin: 1.5rem 0;
        }
        .action-card {
            background: rgba(15, 23, 42, 0.6);
            border: 2px solid rgba(59, 130, 246, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .action-card:hover:not(.disabled) {
            border-color: rgba(59, 130, 246, 0.6);
            background: rgba(30, 41, 59, 0.8);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.2);
        }
        .action-card.disabled {
            opacity: 0.4;
            cursor: not-allowed;
            border-color: rgba(100, 116, 139, 0.2);
        }
        .action-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #60a5fa;
            margin-bottom: 0.5rem;
        }
        .action-description {
            color: #94a3b8;
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }
        .action-cost {
            display: inline-block;
            background: rgba(251, 191, 36, 0.1);
            color: #fbbf24;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }
        .action-impact {
            display: inline-block;
            background: rgba(74, 222, 128, 0.1);
            color: #4ade80;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
        }
        .details-section {
            background: rgba(15, 23, 42, 0.4);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        .details-toggle {
            color: #60a5fa;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
            padding: 0.75rem;
            border-radius: 0.5rem;
            background: rgba(59, 130, 246, 0.1);
            margin-bottom: 1rem;
            transition: all 0.2s;
        }
        .details-toggle:hover {
            background: rgba(59, 130, 246, 0.2);
        }
        .details-content {
            display: none;
        }
        .details-content.show {
            display: block;
        }
        .product-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: rgba(30, 41, 59, 0.4);
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: #334155;
            border-radius: 3px;
            overflow: hidden;
            margin: 0.5rem 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            transition: width 0.5s ease;
        }
        .milestone-tag {
            display: inline-block;
            font-size: 0.75rem;
            background: rgba(74, 222, 128, 0.1);
            color: #4ade80;
            padding: 0.2rem 0.5rem;
            border-radius: 0.25rem;
            margin-left: 0.5rem;
        }
        .log-message {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        .log-message.impact {
            background: rgba(192, 132, 252, 0.1);
            border-left-color: #a855f7;
            font-weight: 600;
        }
        .log-message.success {
            background: rgba(74, 222, 128, 0.1);
            border-left-color: #4ade80;
        }
        .log-message.warning {
            background: rgba(251, 191, 36, 0.1);
            border-left-color: #fbbf24;
        }
        .log-message.error {
            background: rgba(239, 68, 68, 0.1);
            border-left-color: #ef4444;
        }
        .btn-primary {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            border: none;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 1rem;
            transition: all 0.2s;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.4);
        }
        .goal-progress {
            background: rgba(15, 23, 42, 0.6);
            padding: 1rem;
            border-radius: 0.75rem;
            margin-top: 1rem;
        }
        .goal-bar {
            width: 100%;
            height: 12px;
            background-color: #334155;
            border-radius: 6px;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        .goal-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #a855f7);
            transition: width 0.5s ease;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem 0.5rem;
            }
            .metric-large {
                font-size: 2.5rem;
            }
            .action-title {
                font-size: 1.1rem;
            }
            .action-card {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Big Status Display -->
        <div class="status-big">
            <div class="metric-label">Cash Reserves</div>
            <div id="cashDisplay" class="metric-large">$2.0M</div>
            <div id="runwayDisplay" class="runway-warning">8 months runway</div>
            
            <div class="goal-progress">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span class="metric-label">Current Valuation</span>
                    <span class="metric-label">Goal: $1,000M</span>
                </div>
                <div id="valuationDisplay" style="font-size: 1.5rem; font-weight: 700; color: #a855f7;">$15M</div>
                <div class="goal-bar">
                    <div id="goalBar" class="goal-fill" style="width: 1.5%;"></div>
                </div>
            </div>
        </div>

        <!-- Quarter & Action Points -->
        <div style="text-align: center;">
            <div style="color: #94a3b8; font-size: 1.1rem; margin-bottom: 1rem;">
                Quarter <span id="quarterDisplay">1</span>, <span id="yearDisplay">2025</span>
            </div>
            <div class="action-points">
                <span id="apDisplay">3</span> Actions Remaining
            </div>
        </div>

        <!-- Action Cards -->
        <div id="actionsContainer">
            <!-- Populated by JavaScript -->
        </div>

        <!-- Details Toggle -->
        <div class="details-section">
            <div class="details-toggle" onclick="toggleDetails('products')">
                📦 View Product Progress
            </div>
            <div id="productsDetails" class="details-content">
                <!-- Populated by JavaScript -->
            </div>

            <div class="details-toggle" onclick="toggleDetails('metrics')">
                📊 View All Metrics
            </div>
            <div id="metricsDetails" class="details-content">
                <!-- Populated by JavaScript -->
            </div>

            <div class="details-toggle" onclick="toggleDetails('log')">
                📋 Recent Activity (Last 5)
            </div>
            <div id="logDetails" class="details-content">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- End Quarter Button -->
        <button class="btn-primary" onclick="advanceQuarter()">
            End Quarter & Continue ⏭️
        </button>
    </div>

    <script>
        const gameState = {
            quarter: 1,
            year: 2025,
            cash: 2000000,
            valuation: 15000000,
            employees: 12,
            morale: 70,
            reputation: 40,
            dodRelations: 35,
            burnRate: 250000,
            revenue: 0,
            actionPoints: 3,
            maxActionPoints: 3,
            products: {
                aiSurveillance: { 
                    name: 'AI Surveillance', 
                    progress: 25, 
                    deployed: false, 
                    revenue: 100000,
                    milestones: [60, 80, 100]
                },
                autonomousDrone: { 
                    name: 'Autonomous Drones', 
                    progress: 0, 
                    deployed: false, 
                    revenue: 150000,
                    milestones: [60, 100]
                }
            },
            log: [],
            contracts: [],
            gameOver: false,
            fundingRound: 'Seed'
        };

        const actions = [
            {
                id: 'hire',
                title: '👥 Hire Engineering Team',
                description: 'Bring on 5 engineers to accelerate product development',
                cost: '$200K + $50K/mo burn',
                impact: '+25% dev speed, +morale',
                apCost: 1,
                canUse: function() { return gameState.cash >= 200000; },
                execute: function() {
                    gameState.cash -= 200000;
                    gameState.employees += 5;
                    gameState.burnRate += 50000;
                    gameState.morale = Math.min(100, gameState.morale + 10);
                    addLog('Hired 5 engineers. Team: ' + gameState.employees + ', Burn: +$50K/mo', 'success');
                    addLog('IMPACT: All products develop 25% faster next quarter', 'impact');
                }
            },
            {
                id: 'raise',
                title: '💰 Raise Funding',
                description: 'Secure next funding round to extend runway',
                cost: function() { 
                    if (gameState.fundingRound === 'Seed') return '15% dilution';
                    if (gameState.fundingRound === 'Series A') return '12% dilution';
                    return '10% dilution';
                },
                impact: '+$5-30M cash',
                apCost: 1,
                canUse: function() { return true; },
                execute: function() {
                    var funding, newRound;
                    if (gameState.fundingRound === 'Seed') {
                        funding = 5000000;
                        newRound = 'Series A';
                    } else if (gameState.fundingRound === 'Series A') {
                        funding = 15000000;
                        newRound = 'Series B';
                    } else {
                        funding = 30000000;
                        newRound = 'Series C';
                    }
                    gameState.cash += funding;
                    gameState.valuation = Math.floor(gameState.valuation * 1.6);
                    gameState.fundingRound = newRound;
                    addLog('Raised ' + newRound + ': +$' + (funding/1000000) + 'M cash', 'success');
                    addLog('IMPACT: Valuation now $' + (gameState.valuation/1000000).toFixed(1) + 'M. Investors expect growth.', 'impact');
                }
            },
            {
                id: 'dev_ai',
                title: '🤖 Develop AI Surveillance',
                description: 'Focus team effort on AI product development',
                cost: 'No cost',
                impact: '+20-25% progress',
                apCost: 1,
                canUse: function() { return gameState.products.aiSurveillance.progress < 100; },
                execute: function() {
                    const boost = gameState.employees >= 15 ? 25 : 20;
                    gameState.products.aiSurveillance.progress = Math.min(100, gameState.products.aiSurveillance.progress + boost);
                    addLog('AI Surveillance: +' + boost + '% (now ' + gameState.products.aiSurveillance.progress + '%)', 'success');
                    checkMilestones('aiSurveillance');
                }
            },
            {
                id: 'dev_drone',
                title: '🚁 Develop Drones',
                description: 'Invest in autonomous drone technology (higher risk, higher reward)',
                cost: '$300K',
                impact: '+15-20% progress',
                apCost: 1,
                canUse: function() { return gameState.cash >= 300000; },
                execute: function() {
                    gameState.cash -= 300000;
                    const oldProgress = gameState.products.autonomousDrone.progress;
                    gameState.products.autonomousDrone.progress = Math.min(100, Math.max(oldProgress, 20) + 15);
                    addLog('Drone program: +15% (now ' + gameState.products.autonomousDrone.progress + '%)', 'success');
                    addLog('IMPACT: High-risk bet. Drones worth more revenue than AI if successful.', 'impact');
                }
            },
            {
                id: 'contract',
                title: '📋 Bid DoD Contract',
                description: 'Compete for Department of Defense contract',
                cost: '$100K',
                impact: 'Win = +$250K/mo revenue',
                apCost: 1,
                canUse: function() { 
                    const hasDeployed = Object.values(gameState.products).some(function(p) { return p.deployed; });
                    return gameState.cash >= 100000 && gameState.dodRelations >= 50 && hasDeployed;
                },
                execute: function() {
                    gameState.cash -= 100000;
                    const winChance = (gameState.dodRelations * 0.6) + (gameState.reputation * 0.4);
                    addLog('Contract bid submitted. Win chance: ' + winChance.toFixed(0) + '%', 'system');
                    
                    if (Math.random() * 100 < winChance) {
                        const contractValue = Math.floor(Math.random() * 1000000) + 1500000;
                        gameState.revenue += Math.floor(contractValue / 6);
                        gameState.valuation = Math.floor(gameState.valuation * 1.2);
                        addLog('CONTRACT WON! +$' + (contractValue/6000).toFixed(0) + 'K/mo revenue', 'success');
                        addLog('IMPACT: Validates product. Opens doors to bigger contracts.', 'impact');
                    } else {
                        addLog('Contract bid failed. Lost $100K in pursuit costs.', 'error');
                    }
                }
            },
            {
                id: 'marketing',
                title: '📣 Marketing Campaign',
                description: 'Increase brand awareness and DoD visibility',
                cost: '$150K',
                impact: '+reputation, +DoD relations',
                apCost: 1,
                canUse: function() { return gameState.cash >= 150000; },
                execute: function() {
                    gameState.cash -= 150000;
                    gameState.reputation = Math.min(100, gameState.reputation + 12);
                    gameState.dodRelations = Math.min(100, gameState.dodRelations + 8);
                    addLog('Marketing campaign launched', 'success');
                    addLog('IMPACT: Better positioning for next contract bid', 'impact');
                }
            },
            {
                id: 'optimize',
                title: '✂️ Cut Costs',
                description: 'Reduce burn rate to extend runway (hurts morale)',
                cost: 'No cost',
                impact: '-15% burn, -15% morale',
                apCost: 1,
                canUse: function() { return gameState.burnRate > 200000; },
                execute: function() {
                    gameState.burnRate = Math.max(200000, Math.floor(gameState.burnRate * 0.85));
                    gameState.morale = Math.max(0, gameState.morale - 15);
                    addLog('Operations optimized: -15% burn', 'success');
                    addLog('CONSEQUENCE: Team unhappy. May slow development.', 'warning');
                }
            }
        ];

        function addLog(message, type) {
            gameState.log.unshift({msg: message, type: type || 'system'});
            if (gameState.log.length > 10) gameState.log.pop();
        }

        function checkMilestones(productKey) {
            const product = gameState.products[productKey];
            product.milestones.forEach(function(threshold) {
                if (product.progress >= threshold && product.progress - 20 < threshold) {
                    if (threshold === 60) {
                        addLog('🎉 MILESTONE: ' + product.name + ' can now demo to DoD!', 'success');
                    } else if (threshold === 80) {
                        addLog('🎉 MILESTONE: ' + product.name + ' ready for contract bids!', 'success');
                    } else if (threshold === 100) {
                        product.deployed = true;
                        gameState.revenue += product.revenue;
                        gameState.valuation = Math.floor(gameState.valuation * 1.25);
                        addLog('🚀 ' + product.name + ' DEPLOYED! +$' + (product.revenue/1000) + 'K/mo revenue', 'success');
                    }
                }
            });
        }

        function renderActions() {
            const container = document.getElementById('actionsContainer');
            container.innerHTML = '';
            
            actions.forEach(function(action) {
                const canUse = action.canUse();
                const disabled = !canUse || gameState.actionPoints < action.apCost;
                
                const card = document.createElement('div');
                card.className = 'action-card' + (disabled ? ' disabled' : '');
                
                const costText = typeof action.cost === 'function' ? action.cost() : action.cost;
                
                card.innerHTML = '<div class="action-title">' + action.title + '</div>' +
                    '<div class="action-description">' + action.description + '</div>' +
                    '<div><span class="action-cost">' + costText + '</span>' +
                    '<span class="action-impact">' + action.impact + '</span></div>';
                
                if (!disabled) {
                    card.onclick = function() {
                        if (gameState.actionPoints >= action.apCost) {
                            gameState.actionPoints -= action.apCost;
                            action.execute();
                            render();
                        }
                    };
                }
                
                container.appendChild(card);
            });
        }

        function renderProducts() {
            const container = document.getElementById('productsDetails');
            container.innerHTML = '';
            
            Object.keys(gameState.products).forEach(function(key) {
                const p = gameState.products[key];
                const div = document.createElement('div');
                div.className = 'product-row';
                
                var milestoneText = '';
                if (p.progress >= 60) milestoneText = '<span class="milestone-tag">Can demo</span>';
                if (p.progress >= 80) milestoneText += '<span class="milestone-tag">Can bid contracts</span>';
                if (p.deployed) milestoneText = '<span class="milestone-tag">✅ DEPLOYED</span>';
                
                div.innerHTML = '<div style="flex: 1;"><strong>' + p.name + '</strong> ' + milestoneText + 
                    '<div class="progress-bar"><div class="progress-fill" style="width: ' + p.progress + '%"></div></div></div>' +
                    '<div style="font-weight: 700; color: #60a5fa;">' + p.progress + '%</div>';
                
                container.appendChild(div);
            });
        }

        function renderMetrics() {
            const container = document.getElementById('metricsDetails');
            container.innerHTML = '<div class="product-row"><span>Team Size</span><strong>' + gameState.employees + '</strong></div>' +
                '<div class="product-row"><span>Morale</span><strong>' + Math.round(gameState.morale) + '%</strong></div>' +
                '<div class="product-row"><span>Reputation</span><strong>' + Math.round(gameState.reputation) + '%</strong></div>' +
                '<div class="product-row"><span>DoD Relations</span><strong>' + Math.round(gameState.dodRelations) + '%</strong></div>' +
                '<div class="product-row"><span>Monthly Revenue</span><strong>$' + (gameState.revenue/1000).toFixed(0) + 'K</strong></div>' +
                '<div class="product-row"><span>Monthly Burn</span><strong>$' + (gameState.burnRate/1000).toFixed(0) + 'K</strong></div>' +
                '<div class="product-row"><span>Funding Stage</span><strong>' + gameState.fundingRound + '</strong></div>';
        }

        function renderLog() {
            const container = document.getElementById('logDetails');
            container.innerHTML = '';
            
            gameState.log.slice(0, 5).forEach(function(entry) {
                const div = document.createElement('div');
                div.className = 'log-message ' + entry.type;
                div.textContent = entry.msg;
                container.appendChild(div);
            });
        }

        function toggleDetails(section) {
            const el = document.getElementById(section + 'Details');
            el.classList.toggle('show');
        }

        function render() {
            document.getElementById('cashDisplay').textContent = '$' + (gameState.cash / 1000000).toFixed(1) + 'M';
            
            const runway = Math.max(0, Math.floor(gameState.cash / gameState.burnRate));
            const runwayEl = document.getElementById('runwayDisplay');
            runwayEl.textContent = runway + ' months runway';
            runwayEl.className = runway >= 6 ? 'runway-warning' : 'runway-warning runway-critical';
            
            document.getElementById('valuationDisplay').textContent = '$' + (gameState.valuation / 1000000).toFixed(0) + 'M';
            const goalPercent = (gameState.valuation / 1000000000) * 100;
            document.getElementById('goalBar').style.width = goalPercent + '%';
            
            document.getElementById('quarterDisplay').textContent = gameState.quarter;
            document.getElementById('yearDisplay').textContent = gameState.year;
            document.getElementById('apDisplay').textContent = gameState.actionPoints;
            
            renderActions();
            renderProducts();
            renderMetrics();
            renderLog();
        }

        function advanceQuarter() {
            addLog('━━━ END Q' + gameState.quarter + ' ━━━', 'system');
            
            gameState.cash += (gameState.revenue - gameState.burnRate);
            addLog('Net cash flow: ' + ((gameState.revenue - gameState.burnRate) >= 0 ? '+' : '') + '$' + ((gameState.revenue - gameState.burnRate)/1000).toFixed(0) + 'K', 'system');
            
            const teamBoost = gameState.employees >= 15 ? 1.25 : 1.0;
            Object.keys(gameState.products).forEach(function(key) {
                const p = gameState.products[key];
                if (p.progress > 0 && p.progress < 100 && !p.deployed) {
                    p.progress = Math.min(100, p.progress + (8 * teamBoost));
                    checkMilestones(key);
                }
            });
            
            gameState.morale = Math.max(20, gameState.morale - (Math.random() * 5 + 2));
            gameState.actionPoints = gameState.maxActionPoints;
            
            if (gameState.quarter === 4) {
                gameState.quarter = 1;
                gameState.year++;
            } else {
                gameState.quarter++;
            }
            
            checkGameStatus();
            render();
        }

        function checkGameStatus() {
            const runway = Math.floor(gameState.cash / gameState.burnRate);
            if (runway <= 0 && gameState.cash < 0) {
                addLog('💀 GAME OVER: Out of cash', 'error');
                alert('Game Over! You ran out of money. Final valuation: $' + (gameState.valuation/1000000).toFixed(1) + 'M');
                location.reload();
            }
            if (gameState.valuation >= 1000000000) {
                addLog('🎉 VICTORY! Unicorn achieved!', 'success');
                alert('You won! Reached $' + (gameState.valuation/1000000).toFixed(0) + 'M valuation!');
                location.reload();
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            addLog('Welcome to Vanguard Defense Technologies', 'system');
            addLog('Goal: Reach $1B valuation. You have 3 actions per quarter.', 'system');
            addLog('Starting with only $2M - every decision matters!', 'warning');
            render();
        });
    </script>
</body>
</html>
